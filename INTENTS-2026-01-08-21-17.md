# INTENTS-2026-01-08-21-17

## Prompt

Add new MCP home-manager modules and reference it in roles.ai like the other MCP servers. The new server is a HTTP MCP server with URL https://mcp.grep.app. The module will be called grep-app.

## Implementation Details

### Files Created/Modified

1. **Created:** `home/modules/modules/mcp/grep-app/default.nix`
   - New HTTP MCP server module for grep-app
   - Enabled by default
   - No package required (remote HTTP endpoint)
   - No environment variables or authentication required

2. **Modified:** `home/modules/roles/ai/tools.nix`
   - Added `grep-app.enable` option in `options.roles.ai.tools.mcp` section (line ~117)
   - Added `grep-app.enable` configuration passthrough in `config.modules.mcp` section (line ~205)

### Configuration Pattern

The grep-app HTTP MCP server is configured across all 5 integrations:

- **nixvim/CodeCompanion:** Simple HTTP endpoint with `url` field
- **UTCP Code Mode:** HTTP transport with `transport = "http"` and `url`
- **GitHub Copilot CLI:** HTTP type with `type = "http"` and `url`
- **OpenCode:** HTTP type, disabled by default (matching existing pattern)
- **Codex:** HTTP type, disabled by default (matching existing pattern)

### Configuration Format

All integrations use the URL: `https://mcp.grep.app`

```json
{
  "mcpServers": {
    "grep-app": {
      "url": "https://mcp.grep.app"
    }
  }
}
```

### Rationale

- **HTTP Endpoint:** Since grep-app is a remote HTTP MCP server (no local executable), it only requires the URL configuration
- **Enabled by Default:** Consistent with other MCP servers like context7, fetch, git, kubernetes, etc.
- **No Package Dependency:** Unlike stdio-based servers, no local package/executable is needed
- **Simple Configuration:** All five integrations handle HTTP endpoints natively with minimal configuration
